<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Classes - Alan Interactive Documentation</title>

    <!-- Custom HTML head -->
    

    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="shortcut icon" href="favicon.png">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/chrome.css">

    <!-- Fonts -->
    <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
    

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="highlight.css">
    <link rel="stylesheet" href="tomorrow-night.css">
    <link rel="stylesheet" href="ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    
        <link rel="stylesheet" href="css/solarized-light-hljs.css">
    
        <link rel="stylesheet" href="css/solarized-dark-hljs.css">
    

    
</head>
<body>
<!-- Provide site root to javascript -->
<script type="text/javascript">
    var path_to_root = "";
    var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "solarized-dark" : "solarized-light";
</script>

<!-- Work around some values being stored in localStorage wrapped in quotes -->
<script type="text/javascript">
    try {
        var sidebar = localStorage.getItem('mdbook-sidebar');

        if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
            localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
        }
    } catch (e) { }
</script>

<!-- Set the theme before any content is loaded, prevents flash -->
<script type="text/javascript">
    var html = document.querySelector('html');
    html.classList.remove('no-js')
    html.classList.add(default_theme);
    html.classList.add('js');
</script>

<!-- Hide / unhide sidebar before it is displayed -->
<script type="text/javascript">
    var html = document.querySelector('html');
    var sidebar = 'hidden';
    if (document.body.clientWidth >= 1080) {
        try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
        sidebar = sidebar || 'visible';
    }
    html.classList.remove('sidebar-visible');
    html.classList.add("sidebar-" + sidebar);
</script>

<nav id="sidebar" class="sidebar" aria-label="Table of contents">
    <div class="sidebar-scrollbox">
        <ol class="chapter"><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="about_alan.html"><strong aria-hidden="true">2.</strong> About alan</a></li><li class="chapter-item expanded "><a href="language_reference.html"><strong aria-hidden="true">3.</strong> Language Reference</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="structure_and_notation.html"><strong aria-hidden="true">3.1.</strong> Structure and Notation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="file_structure.html"><strong aria-hidden="true">3.1.1.</strong> File Structure</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="scope.html"><strong aria-hidden="true">3.1.1.1.</strong> Implied Structure: Scope</a></li><li class="chapter-item "><a href="imports.html"><strong aria-hidden="true">3.1.1.2.</strong> Imports</a></li><li class="chapter-item "><a href="types.html"><strong aria-hidden="true">3.1.1.3.</strong> Types</a></li><li class="chapter-item "><a href="constants.html"><strong aria-hidden="true">3.1.1.4.</strong> Constants</a></li><li class="chapter-item "><a href="events.html"><strong aria-hidden="true">3.1.1.5.</strong> Events</a></li><li class="chapter-item "><a href="functions.html"><strong aria-hidden="true">3.1.1.6.</strong> Functions</a></li><li class="chapter-item "><a href="operators.html"><strong aria-hidden="true">3.1.1.7.</strong> Operators</a></li><li class="chapter-item "><a href="statements.html"><strong aria-hidden="true">3.1.1.8.</strong> Statements</a></li><li class="chapter-item "><a href="interfaces.html"><strong aria-hidden="true">3.1.1.9.</strong> Interfaces</a></li><li class="chapter-item "><a href="handlers.html"><strong aria-hidden="true">3.1.1.10.</strong> Handlers</a></li><li class="chapter-item "><a href="exports.html"><strong aria-hidden="true">3.1.1.11.</strong> Exports</a></li><li class="chapter-item expanded "><a href="classes.html" class="active"><strong aria-hidden="true">3.1.1.12.</strong> Classes</a></li></ol></li><li class="chapter-item expanded "><a href="modules.html"><strong aria-hidden="true">3.1.2.</strong> Modules</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="module_definition.html"><strong aria-hidden="true">3.1.2.1.</strong> Definition</a></li><li class="chapter-item "><a href="module_resolution.html"><strong aria-hidden="true">3.1.2.2.</strong> Resolution</a></li><li class="chapter-item "><a href="module_acquisition.html"><strong aria-hidden="true">3.1.2.3.</strong> Acquisition</a></li><li class="chapter-item "><a href="module_testing.html"><strong aria-hidden="true">3.1.2.4.</strong> Testing and Mocking</a></li><li class="chapter-item "><a href="module_mutation.html"><strong aria-hidden="true">3.1.2.5.</strong> Mutation</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="standard_library.html"><strong aria-hidden="true">3.2.</strong> Standard Library</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="built_ins.html"><strong aria-hidden="true">3.2.1.</strong> Built-ins</a></li><li class="chapter-item expanded "><a href="std_app.html"><strong aria-hidden="true">3.2.2.</strong> @std/app</a></li><li class="chapter-item expanded "><a href="std_trig.html"><strong aria-hidden="true">3.2.3.</strong> @std/trig</a></li><li class="chapter-item expanded "><a href="std_stats.html"><strong aria-hidden="true">3.2.4.</strong> @std/stats</a></li><li class="chapter-item expanded "><a href="std_http.html"><strong aria-hidden="true">3.2.5.</strong> @std/http</a></li><li class="chapter-item expanded "><a href="std_dht.html"><strong aria-hidden="true">3.2.6.</strong> @std/dht</a></li><li class="chapter-item expanded "><a href="std_datastore.html"><strong aria-hidden="true">3.2.7.</strong> @std/datastore</a></li><li class="chapter-item expanded "><a href="std_logger.html"><strong aria-hidden="true">3.2.8.</strong> @std/logger</a></li><li class="chapter-item expanded "><a href="std_tcp.html"><strong aria-hidden="true">3.2.9.</strong> @std/tcp</a></li><li class="chapter-item expanded "><a href="std_udp.html"><strong aria-hidden="true">3.2.10.</strong> @std/udp</a></li><li class="chapter-item expanded "><a href="alantech_postgres.html"><strong aria-hidden="true">3.2.11.</strong> @alantech/postgres</a></li><li class="chapter-item expanded "><a href="std_test.html"><strong aria-hidden="true">3.2.12.</strong> @std/test</a></li><li class="chapter-item expanded "><a href="std_fs.html"><strong aria-hidden="true">3.2.13.</strong> @std/fs</a></li><li class="chapter-item expanded "><a href="std_csv.html"><strong aria-hidden="true">3.2.14.</strong> @std/csv</a></li><li class="chapter-item expanded "><a href="std_json.html"><strong aria-hidden="true">3.2.15.</strong> @std/json</a></li><li class="chapter-item expanded "><a href="std_xml.html"><strong aria-hidden="true">3.2.16.</strong> @std/xml</a></li><li class="chapter-item expanded "><a href="std_html.html"><strong aria-hidden="true">3.2.17.</strong> @std/html</a></li><li class="chapter-item expanded "><a href="std_css.html"><strong aria-hidden="true">3.2.18.</strong> @std/css</a></li><li class="chapter-item expanded "><a href="std_zlib.html"><strong aria-hidden="true">3.2.19.</strong> @std/zlib</a></li><li class="chapter-item expanded "><a href="std_bz2.html"><strong aria-hidden="true">3.2.20.</strong> @std/bz2</a></li><li class="chapter-item expanded "><a href="std_lzma.html"><strong aria-hidden="true">3.2.21.</strong> @std/lzma</a></li><li class="chapter-item expanded "><a href="std_base64.html"><strong aria-hidden="true">3.2.22.</strong> @std/base64</a></li><li class="chapter-item expanded "><a href="std_hash.html"><strong aria-hidden="true">3.2.23.</strong> @std/hash</a></li><li class="chapter-item expanded "><a href="std_ssl.html"><strong aria-hidden="true">3.2.24.</strong> @std/ssl</a></li><li class="chapter-item expanded "><a href="alantech_auth.html"><strong aria-hidden="true">3.2.25.</strong> @alantech/auth</a></li><li class="chapter-item expanded "><a href="std_i18n.html"><strong aria-hidden="true">3.2.26.</strong> @std/i18n</a></li><li class="chapter-item expanded "><a href="alantech_graphql.html"><strong aria-hidden="true">3.2.27.</strong> @alantech/graphql</a></li><li class="chapter-item expanded "><a href="alantech_oauth2.html"><strong aria-hidden="true">3.2.28.</strong> @alantech/oauth2</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="examples_with_explanations.html"><strong aria-hidden="true">4.</strong> Examples with Explanations</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="many_forms_hello_world.html"><strong aria-hidden="true">4.1.</strong> The many forms of &quot;Hello, World!&quot;</a></li><li class="chapter-item expanded "><a href="advanced_examples.html"><strong aria-hidden="true">4.2.</strong> More advanced examples</a></li></ol></li></ol>
    </div>
    <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
</nav>

<div id="page-wrapper" class="page-wrapper">

    <div class="page">
        
        <div id="menu-bar-hover-placeholder"></div>
        <div id="menu-bar" class="menu-bar sticky bordered">
            <div class="left-buttons">
                <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                    <i class="fa fa-bars"></i>
                </button>
                
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                
            </div>

            <h1 class="menu-title">Alan Interactive Documentation</h1>

            <div class="right-buttons">
                <a href="https://alan-lang.org" title="Home">
                    <i>Home</i>
                </a>
                <a href="https://alan-lang.org/blog.html" title="Blog">
                    <i>Blog</i>
                </a>
                <a href="https://github.com/alantech" title="Git repository" aria-label="Git repository">
                    <i id="git-repository-button" class="fa fa-github"></i>
                </a>
            </div>
        </div>

        
            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>
        

        <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
        <script type="text/javascript">
            document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
            document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
            Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
            });
        </script>

        <div id="content" class="content">
            <main>
                <h4><a class="header" href="#coming-soon-tm-classes" id="coming-soon-tm-classes">Coming Soon (tm): Classes</a></h4>
<p>In <code>alan</code>, classes are (will be) almost purely syntactic sugar. A class is a collection of fields in a type and methods to act on them. So that's what classes are in <code>alan</code>, syntactic sugar to define methods while skipping the first argument in the argument list (and automatically naming it <code>this</code>) for a type that is being defined.</p>
<p>The only extra bit that's not quite purely syntactic sugar would be the <code>constructor</code> function, which will need a bit of extra help to use.</p>
<p>A simple class like this:</p>
<pre><code>class Foo {
  bar: string
  baz: bool

  getBar(): string {
    return this.bar
  }

  bazzle(): string {
    if (this.baz) {
      return &quot;bazzle!&quot;
    } else {
      return &quot;buzzle...&quot;
    }
  }
}
</code></pre>
<p>Would directly translate to:</p>
<pre><code>type Foo {
  bar: string
  baz: bool
}

fn getBar(this: Foo): string {
  return this.bar
}

fn bazzle(this: Foo): string {
  if (this.baz) {
    return &quot;bazzle!&quot;
  } else {
    return &quot;buzzle...&quot;
  }
}
</code></pre>
<p>In this case, the number of lines of code is identical, though the class syntax is very slightly less typing and looks more familiar to people coming from OO languages. Those same people will be noticing that this direct translation from <code>class</code> to <code>type</code> means there cannot be private and protected properties and methods defined in the class. Two points:</p>
<ol>
<li>Methods can still be effectively private by not exporting them along with the rest of the class, but I would still discourage that, because:</li>
<li>Private properties of a class have always been a mistake. They assume that there is never going to be a valid use-case for anyone else to ever access them, so data serialization and deserialization, among other things, is made ridiculously hard in these OO languages, and they really come from a misguided attempt by language authors to obfuscate how their code works while calling it &quot;Encapsulation&quot;, as if you don't already have to deal with the allocated memory for it, deal with potential serialization/translation issues and repopulation issues if that internal state can't be created by the constructor.</li>
</ol>
<p><img src="./src/docs/im_right.jpg" alt="Why are you booing me? I'm right." /></p>
<p>However, I believe it would be possible to obfuscate certain properties by creating a special type with the private values and creating a special property (probably called <code>private</code>) and not exporting that type. I'm not sure if I want to treat that as a compiler error, though, because I'm right about trying to restrict data access.</p>
<p>As alluded to above, there are two ways that classes could be exported:</p>
<pre><code>export class Foo {
  bar: string
  baz: bool

  getBar(): string {
    return this.bar
  }

  bazzle(): string {
    if (this.baz) {
      return &quot;bazzle!&quot;
    } else {
      return &quot;buzzle...&quot;
    }
  }
}
</code></pre>
<p>which would export everything, the type and all of the defined methods, versus:</p>
<pre><code>class Foo {
  bar: string
  baz: bool

  getBar(): string {
    return this.bar
  }

  bazzle(): string {
    if (this.baz) {
      return &quot;bazzle!&quot;
    } else {
      return &quot;buzzle...&quot;
    }
  }
}

export Foo
export getBar
</code></pre>
<p>which exports the <code>type</code> with the same name and the <code>getBar</code> method while leaving the <code>bazzle</code> method as effectively private.</p>
<p>Constructors complicate this a bit. They don't have an exact replica in the pure type + functions perspective, because there is also special syntactic sugar for using them.</p>
<p>For instance, this class:</p>
<pre><code>class Foo {
  bar: string
  baz: bool

  constructor(bar: string, baz: bool) {
    this.bar = bar
    this.baz = baz
  }

  getBar(): string {
    return this.bar
  }

  bazzle(): string {
    if (this.baz) {
      return &quot;bazzle!&quot;
    } else {
      return &quot;buzzle...&quot;
    }
  }
}
</code></pre>
<p>could be functionally replicated by:</p>
<pre><code>type Foo {
  bar: string
  baz: bool
}

fn createFoo(bar: string, baz: bool): Foo {
  let this: Foo
  this.bar = bar
  this.baz = baz
  return this
}

fn getBar(this: Foo): string {
  return this.bar
}

fn bazzle(this: Foo): string {
  if (this.baz) {
    return &quot;bazzle!&quot;
  } else {
    return &quot;buzzle...&quot;
  }
}
</code></pre>
<p>But the calling of that constructor function would look like this for classes (examples assuming type inference is built):</p>
<pre><code>const foo = new Foo(&quot;bar&quot;, true)
</code></pre>
<p>and this way for types:</p>
<pre><code>const foo = createFoo(&quot;bar&quot;, true)
</code></pre>
<p>Essentially the same, but with the latter, I have to make sure I import <code>createFoo</code> while the former I get it for free and have this special functional syntax for new type creation that I don't get with pure types. I would like to figure out a way to solve that for both types and classes, but I haven't figured one out yet.</p>
<p>Both would still be able to create an instance using the type constant mechanism:</p>
<pre><code>const foo = new Foo {
  bar: &quot;bar&quot;
  baz: true
}
</code></pre>
<p>but that's not powerful enough when there are certain properties it is not expected that the user of the type would ever initialize, or if there are any particular side-effects necessary during initialization.</p>

            </main>

            <nav class="nav-wrapper" aria-label="Page navigation">
                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="exports.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="modules.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

                <div style="clear: both"></div>
            </nav>
        </div>
    </div>

    <nav class="nav-wide-wrapper" aria-label="Page navigation">
        
            <a rel="prev" href="exports.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>
        

        
            <a rel="next" href="modules.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </nav>

</div>



<!-- Analytics Tag -->
<script type="text/javascript">
    var localAddrs = ["localhost", "127.0.0.1", ""];

    // make sure we don't activate analytics if the developer is
    // inspecting the book locally...
    if (localAddrs.indexOf(document.location.hostname) === -1) {
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var t=analytics.methods[e];analytics[t]=analytics.factory(t)}analytics.load=function(e,t){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=t};analytics.SNIPPET_VERSION="4.1.0";
            analytics.load("fGya8GY5wLqdnLzyXnGM2HjYglPszWS0");
            analytics.page("Docs", "Classes");
        }}();
    }
</script>


    <script type="text/javascript">
        window.playpen_line_numbers = true;
    </script>



    <script type="text/javascript">
        window.playpen_copyable = true;
    </script>



    <script src="ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>



    <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="searcher.js" type="text/javascript" charset="utf-8"></script>


<!-- Custom JS scripts -->

    <script type="text/javascript" src="bundle.js"></script>

    <script type="text/javascript" src="theme-solarized_dark.js"></script>

    <script type="text/javascript" src="theme-solarized_light.js"></script>


<script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
<script src="highlight.js" type="text/javascript" charset="utf-8"></script>
<script src="book.js" type="text/javascript" charset="utf-8"></script>

</body>
</html>
